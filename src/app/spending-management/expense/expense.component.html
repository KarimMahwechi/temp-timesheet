
<app-aside-bar></app-aside-bar>
<body>
    <div class="loader"></div>
    <div id="app"><div class="main-content">
        <section class="section" style="margin-top:-2%;">
            <div class="section-body">
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-12">
                        <div class="card card-light">
                            <div class="card-header" style="margin-top:3%;">
                            <h3> Liste de mes dépenses</h3>
                            </div>

                            <div class="card-body">
                                <!---->
                                    <table>
                                        <tr>
                                        <td>
                                            <button class="btn btn-outline-info mb-2 me-2" (click)="openScrollableContent(longContent)"><i class="fa-solid fa-plus"></i>Dépense</button>
                                        </td>
                                        <td>
                                            <button class="btn btn-outline-info mb-2 me-2" (click)="openScrollableContent1(longContent1)"><i class="fa-solid fa-plus"></i>Frais kilométrique</button>
                                        </td>
                                        <!-- RADIO BUTTON -->
                                        <td>
                                            <label class="custom-switch">
                                            <input type="radio" name="option" value="1" class="custom-switch-input" checked >
                                            <span class="custom-switch-indicator"></span>
                                            <span class="custom-switch-description">Vérifié</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="custom-switch">
                                            <input type="radio" name="option" value="2" class="custom-switch-input">
                                            <span class="custom-switch-indicator"></span>
                                            <span class="custom-switch-description">Rejeté</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="custom-switch">
                                            <input type="radio" name="option" value="3" class="custom-switch-input">
                                            <span class="custom-switch-indicator"></span>
                                            <span class="custom-switch-description">Approuvé</span>
                                            </label>
                                        </td>  
                                        <!-- RADIO BUTTON -->
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary me-2" (click)="acc.toggle('toggle-1')">Toggle first</button>
                                        </td>
                                        </tr>   
                                    </table>
                                    <!---->
                                    <ngb-accordion #acc="ngbAccordion">
                                        <ngb-panel id="toggle-2" title="Filtres Standards" hidden="">
                                          <ng-template ngbPanelContent>
                                            <!-- <table>
                                                <tr>
                                                    <td>
                                                        <div class="form-group" data-width="300">
                                                        <select class="form-control">
                                                            <option value="" disabled selected hidden>Sélectionnez</option>
                                                             <option>Option 1</option>
                                                             <option>Option 2</option>
                                                             <option>Option 3</option>
                                                             <option>Option 4</option>
                                                             <option>Option 5</option>
                                                             <option>Option 6</option>
                                                           </select>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group" data-width="160">                                        
                                                            <select class="form-control selectric">
                                                              <option>Facturable</option>
                                                              <option>Non facturable</option>
                                                            </select>
                                                         </div> 
                                                    </td>
                                                </tr>
                                            </table> -->
                                            <form>
                                                <!---->
                                                <div class="pretty p-switch p-fill">
                                                  <input type="checkbox" />
                                                  <div class="state p-info">
                                                    <label>Facturable au client</label>
                                                  </div>
                                                </div>
                                                <!---->
                                                <div class="pretty p-switch p-fill">
                                                  <input type="checkbox" />
                                                  <div class="state p-info">
                                                    <label>A rembourser</label>
                                                  </div>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <select id="inputCategorie" class="form-control form-control-sm">
                                                        <option selected hidden> -- Sélectionnez la catégorie de dépense -- </option>
                                                        <option>Option 1</option>
                                                        <option>Option 2</option>
                                                        <option>Option 3</option>
                                                    </select>
                                                    <select id="inputCategorie" class="form-control form-control-sm">
                                                        <option selected hidden> -- Sélectionnez la catégorie de dépense -- </option>
                                                        <option>Option 1</option>
                                                        <option>Option 2</option>
                                                        <option>Option 3</option>
                                                    </select>
                                                </div>
                                                    <form class="form-inline">
                                                      <label class="sr-only" for="inlineFormInputName2">Name</label>
                                                      <input type="text" class="form-control mb-2 mr-sm-2" id="inlineFormInputName2"
                                                        placeholder="Jane Doe">
                                                      <label class="sr-only" for="inlineFormInputGroupUsername2">Username</label>
                                                      <div class="input-group mb-2 mr-sm-2">
                                                        <input type="text" class="form-control" id="inlineFormInputGroupUsername2"
                                                          placeholder="Username">
                                                      </div>
                                                    </form>                          
                                            </form>
                                          </ng-template>
                                        </ngb-panel>
                                    </ngb-accordion>
                                <!---->
                                <input type="search" class="form-control" name="firstName" placeholder="Enter your name " [(ngModel)] ="categorie" (ngModelChange)="Search()" />
                                <table class="table table-borderless">
                                    <thead>
                                    <tr>
                                        <th (click)="sortField('date')">Date &nbsp; <i class="fa-solid fa-sort"></i></th>
                                        <th (click)="sortField('description')">Description &nbsp; <i class="fa-solid fa-sort"></i></th>
                                        <th (click)="sortField('categorie')">Catégorie &nbsp; <i class="fa-solid fa-sort"></i></th>
                                        <th (click)="sortField('ville')">Ville &nbsp; <i class="fa-solid fa-sort"></i></th>
                                        <th (click)="sortField('noteFrais')">Note de frais &nbsp; <i class="fa-solid fa-sort"></i></th>
                                        <th (click)="sortField('montant')">Montant TTC &nbsp; <i class="fa-solid fa-sort"></i></th>
                                        <th >R</th>
                                        <th (click)="sortField('tva')">TVA &nbsp; <i class="fa-solid fa-sort"></i></th>
                                        <th></th>
                                        <th (click)="sortField('etat')">Etat &nbsp; <i class="fa-solid fa-sort"></i></th>
                                        <th>Action</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let expenses of expensesList |orderBy: key: reverse | paginate: {itemsPerPage: 10 , currentPage : p} ;">
                                        <td> {{ expenses.date }}</td>
                                        <td> {{ expenses.description }} </td>
                                        <td>
                                            {{ expenses.categorie }} 
                                        </td>
                                        <td>
                                            {{ expenses.ville }} 
                                        </td>
                                        <td>{{ expenses.noteFrais }}</td>

                                        <td>{{ expenses.montant }}</td>
                                        <td>{{ expenses.aRembourser }}</td>
                                        <td>{{ expenses.tva }}</td>
                                        <td>Inv</td>
                                        <td>
                                        <div class="badge badge-success badge-shadow">{{ expenses.etat }}</div>
                                        </td>
                                        <td><a href="#" class="btn btn-primary">Detail</a></td>                                 
                                    </tr> 
                                    </tbody>
                                    <pagination-controls (pageChange)="p = $event"></pagination-controls>
                                </table>
                            </div>
                            <!---->
                                                
                                <div class="card-body">
                                    <!-- BEGIN : MODEL TEMPLATE ( Expenses )-->
                                    <ng-template #content let-modal>
                                    <div class="modal-header">
                                        <h4 class="modal-title">Modal title</h4>
                                        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
                                    </div>
                                    <div class="modal-body">
                                        <p>One fine body&hellip;</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
                                    </div>
                                    </ng-template>
                                    
                                    <ng-template #longContent let-modal>
                                    <div class="modal-header">
                                        <h4 class="modal-title">Ajouter une dépense</h4>
                                        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
                                    </div>
                                    <div class="modal-body">
                                        <!-- BEGIN : MODEL 1 -->
                                        <form>
                                            <!---->
                                            <div class="pretty p-switch p-fill">
                                            <input type="checkbox" />
                                            <div class="state p-info">
                                                <label>Facturable au client</label>
                                            </div>
                                            </div>
                                            <!---->
                                            <div class="pretty p-switch p-fill">
                                            <input type="checkbox" />
                                            <div class="state p-info">
                                                <label>A rembourser</label>
                                            </div>
                                            </div>
                                            <div class="badge badge-success" style="position: absolute; right: 20px;">Verfié</div>
                                            <!--
                                            <div class="pretty p-icon p-jelly p-round p-bigger">
                                            <input type="checkbox" />
                                            <div class="state p-info">
                                                <i class="icon material-icons">done</i>
                                                <label>done</label>
                                            </div>
                                            </div>
                                            -->
                                            <br>
                                            <div class="form-group">
                                            <!--Titre-->
                                            <br>
                                            <label><h6> Généralités</h6> </label>
                                            <input type="text" class="form-control" id="inputTitre" placeholder="Titre">
                                            <!--Date-->
                                            <label></label>
                                            <input type="date" class="form-control" placeholder="Date">
                                            <!--Categorie-->
                                            <label></label>
                                                <select id="inputCategorie" class="form-control form-control-sm">
                                                <option selected hidden> -- Sélectionnez la catégorie de dépense -- </option>
                                                <option>Option 1</option>
                                                <option>Option 2</option>
                                                <option>Option 3</option>
                                                </select>
                                            <!--Moyen de paiement-->
                                            <label></label>
                                                <select id="inputPaiement" class="form-control form-control-sm">
                                                <option selected hidden > -- Sélectionnez le moyen de paiement -- </option>
                                                <option>Option 1</option>
                                                <option>Option 2</option>
                                                <option>Option 3</option>
                                                </select>
                                            <!--Pays-->
                                            <label></label>
                                            <select id="inputPays" class="form-control form-control-sm">
                                                <option selected hidden > -- Sélectionnez le pays -- </option>
                                                <option>Option 1</option>
                                                <option>Option 2</option>
                                                <option>Option 3</option>
                                            </select>
                                            <!--Note frais-->
                                            <label></label>
                                            <div class="input-group mb-3">
                                                <input type="text" class="form-control" placeholder="Note de frais" aria-label="">
                                                <div class="input-group-append">
                                                <button class="btn btn-light" type="submit"><i class="fa-solid fa-circle-plus" style="color:#7C83FD;"></i></button>
                                                </div>
                                            </div>
                                            <!--
                                            <div class="input-group">
                                                <select class="custom-select" id="inputGroupSelect04">
                                                <option selected>Choose...</option>
                                                <option value="1">One</option>
                                                <option value="2">Two</option>
                                                <option value="3">Three</option>
                                                </select>
                                                <div class="input-group-append">
                                                <button class="btn btn-primary" type="button">Button</button>
                                                </div>
                                            </div>
                                            -->
                                            <!--Note-->
                                            <textarea class="form-control" placeholder="Commentaire"></textarea>
                                            <!-- Généralités -->
                                            <br>
                                            <label><h6> Données financières </h6></label>
                                            <!-- Table -->
                                            <table class="table ">
                                                <thead>
                                                    <tr>
                                                    <th colspan="2">
                                                        <input  class="form-control" type="text" readonly="" value="250.000" style="text-align:center;"/>
                                                    </th>
                                                    <th  colspan="2">
                                                        <input  class="form-control" type="text" readonly="" value="TND"/>
                                                    </th>               
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let field of fieldArray; let i = index">
                                                        <td>
                                                            <input  class="form-control" type="text" />
                                                        </td>
                                                        <td>
                                                        <select id="inputCategory" class="form-control form-control-sm">
                                                            <option selected hidden>TVA</option>
                                                            <option value="1">7%</option>
                                                            <option value="2">10%</option>
                                                            <option value="3">19%</option>
                                                        </select>
                                                        </td>
                                                        <td>
                                                        <input  class="form-control" type="text" placeholder="Montant hors TVA"/>
                                                        </td>
                                                        <td>
                                                            <button class="btn btn-light"  type="button" (click)="deleteFieldValue(i)" style="color:#7C83FD;"><i class="fa-solid fa-circle-minus"></i></button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                    <td>
                                                        <input  class="form-control" type="text" />
                                                    </td>
                                                    <td>
                                                        <select id="inputCategory" class="form-control form-control-sm">
                                                        <option selected hidden>TVA</option>
                                                        <option value="1">7%</option>
                                                        <option value="2">10%</option>
                                                        <option value="3">19%</option>
                                                        </select>
                                                    </td>
                                                    <td>
                                                        <input  class="form-control" type="text" placeholder="Montant hors TVA"/>
                                                    </td>
                                                        <td>
                                                            <button class="btn btn-light" type="button" (click)="addFieldValue()" style="color:#7C83FD;"><i class="fa-solid fa-circle-plus"></i></button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <!-- End : Table -->
                                            
                                            <!-- BEGIN : Montant non taxtable-->
                                            <div class="pretty p-switch p-fill">
                                                <input type="checkbox" name="myChk" id="myChk" (change)="triggerSomeEvent()" />
                                                    <div class="state p-info">
                                                    <label>La dépense contient un montant non taxable</label>
                                                    </div>
                                            </div>
                                            <br>
                                            <label></label>
                                            <div class="form-row">
                                                <div class="form-group col-md-6">
                                                <input type="text" class="form-control" name="myTxt" id="myTxt" value="" #taxValue [disabled]="isDisabled" placeholder="Montant non taxtable"/>
                                                </div>
                                                <div class="form-group col-md-6">
                                                <input type="text" class="form-control" value="TND" readonly="">
                                                </div>
                                            </div>
                                            <!--END : Montant non taxtable -->
                                            <!--BEGIN : Upload file -->
                                                <div class="form-group">
                                                <label style="font-size: 15px;">Selectionner un reçu</label>
                                                <input type="file" class="form-control" (change)="onSelectFile($event)"/>
                                                </div>
                                                <div class="form-group">
                                                <img [src]="urlFile" alt="" srcset="" height="230">
                                                </div>
                                            <!--END : Upload file-->
                                            </div>
                                        </form>
                                        </div>    
                                        <!-- END : MODEL 1 -->
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Annuler</button>
                                        <button type="button" class="btn btn-primary" (click)="modal.close('Close click')">Sauvegarder</button>
                                    </div>
                        
                                    </ng-template>
  
                                    <!-- END : MODEL TEMPLATE-->
                                    
                                    <!-- BEGIN : MODEL TEMPLATE ( Expense report )-->
                    
                                    <ng-template #content1 let-modal>
                                    <div class="modal-header">
                                        <h4 class="modal-title">Modal title</h4>
                                        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
                                    </div>
                                    <div class="modal-body">
                                        <p>One fine body&hellip;</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
                                    </div>
                                    </ng-template>
                                    
                                    <ng-template #longContent1 let-modal>
                                    <div class="modal-header">
                                        <h4 class="modal-title">Ajouter frais kilométriques</h4>
                                        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
                                    </div>
                                    <div class="modal-body">
                                        <!-- BEGIN : MODEL 2 -->
                                        <form>
                                            <!---->
                                            <div class="pretty p-switch p-fill">
                                            <input type="checkbox" />
                                            <div class="state p-info">
                                                <label>Facturable au client</label>
                                            </div>
                                            </div>
                                            <!---->
                                            <div class="badge badge-warning" style="position: absolute; right: 20px;">Verfié</div>
                                            <!--
                                            <div class="pretty p-icon p-jelly p-round p-bigger">
                                            <input type="checkbox" />
                                            <div class="state p-info">
                                                <i class="icon material-icons">done</i>
                                                <label>done</label>
                                            </div>
                                            </div>
                                            -->
                                            <br>
                                            <div class="form-group">
                                            <!--Titre-->
                                            <br>
                                            <label>Frais</label>
                                            <br>
                                            <input type="text" class="form-control" id="inputTitre" placeholder="Titre">
                                            <!-- BEGIN : Depart / Arrivée -->
                                            <div class="form-row">
                                                <!--BEGIN : Départ-->
                                                
                                                <div class="form-group col-md-6">
                                                <label style="font-size:14px;">Départ</label>
                                                <input type="text" class="form-control" id="" placeholder="De">
                                                </div>
                                                <!-- END : Départ -->
                                                <!-- BEGIN : Arrivée -->
                                                <div class="form-group col-md-6">
                                                <label style="font-size:14px;" >Arrivée</label>
                                                <input type="text" class="form-control" id="" placeholder="À">
                                                </div>
                                                <!-- END : Arrivée -->
                                            </div>
                                            <!-- END : Depart / Arrivée -->
                                            <!-- BEGIN : Trajet -->
                                            <div class="form-row">
                                                <div class="form-group col-md-6">
                                                <label style="font-size:14px;">Trajet</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" placeholder="1" min="1">
                                                    <select class="custom-select" id="inputGroupSelect">
                                                    <option value="1" selected>Aller</option>
                                                    <option value="2">Retour</option>
                                                    <option value="3">Aller / Retour</option>
                                                    </select>
                                                </div>
                                                </div>
                                                <div class="form-group col-md-6">
                                                <label>.</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" placeholder="120" min="10" max="180">
                                                    <input type="text" class="form-control" value="KM" disabled>
                                                </div>
                                                </div>
                                            </div>
                                            <!--END : Trajet-->
                                            <!-- BEGIN : Tarif -->
                                            <div class="form-row">
                                                <div class="form-group col-md-6">
                                                <label style="font-size:14px;">Tarification</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" placeholder="3.750 DT" min="1">
                                                </div>
                                                </div>
                                                <div class="form-group col-md-6">
                                                <label>.</label>
                                                <div class="input-group">
                                                    <select class="custom-select" id="inputGroupSelect">
                                                    <option value="1" selected>Tarif Std.</option>
                                                    <option value="2">Option 2</option>
                                                    <option value="3">Option 3</option>
                                                    </select>
                                                </div>
                                                </div>
                                            </div>
                                            <!--END : Tarif -->
                                            <!--BEGIN : Total -->
                                            <div class="form-row">
                                                <div class="form-group col-md-6">
                                                <label style="font-size:14px;">Total</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" placeholder="-- KM" min="1">
                                                </div>
                                                </div>
                                                <div class="form-group col-md-6">
                                                <label>.</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" placeholder="125.000" min="1" disabled>
                                                    <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        DT
                                                    </div>
                                                    </div>
                                                </div>
                                                </div>
                                            </div>
                                            <!--END : Total-->
                                            <!--BEGIN : Valeur a rembourser -->
                                            <div class="form-row">
                                                <div class="form-group col-md-6">
                                                <label style="font-size:14px;">Valeur à rembourser</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" placeholder="125.000" min="1" disabled>
                                                    <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        DT
                                                    </div>
                                                    </div>
                                                </div>
                                                </div>
                                                <div class="form-group col-md-6">
                                                <label>'</label>
                                                <div class="input-group">
                                                    <select class="custom-select" id="inputGroupSelect">
                                                    <option value="1" selected>100%</option>
                                                    <option value="2">50%</option>
                                                    <option value="3">0%</option>
                                                    </select>
                                                </div>
                                                </div>
                                            </div>
                                            <!--END : Total-->
                    
                                            
                                            <!--BEGIN : Date-->
                                            <div class="form-row">
                                                <div class="form-group col-md-6">
                                                <label style="font-size:14px;">Période</label>
                                                <div class="input-group">
                                                    <input type="date" class="form-control" >
                                                </div>
                                                </div>
                                                <div class="form-group col-md-6">
                                                <label>.</label>
                                                <div class="input-group">
                                                    <input type="date" class="form-control" >
                                                </div>
                                                </div>
                                            </div>
                                            <!--END : Date -->
                    
                                            <!--BEGIN : Note frais-->
                                            <label></label>
                                            <div class="input-group mb-3">
                                                <input type="text" class="form-control" placeholder="Note de frais" aria-label="">
                                                <div class="input-group-append">
                                                <button class="btn btn-light" type="submit"><i class="fa-solid fa-circle-plus" style="color:#7C83FD;"></i></button>
                                                </div>
                                            </div>
                                            <!-- END : Note frais -->
                                            <!--BEGIN : Commenataire-->
                                            <textarea class="form-control" placeholder="Commentaire"></textarea>
                                            <!--END : Commenataire-->
                                            </div>
                                        </form>
                                        </div>
                                        
                                    <!-- END : MODEL 2 -->
                                    
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Annuler</button>
                                        <button type="button" class="btn btn-primary" (click)="modal.close('Close click')">Sauvgarder</button>
                                    </div>
                        
                                    </ng-template>
                    
                                    
                                    <!-- END : MODEL TEMPLATE-->
                                    </div>
                            <!---->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
</body>